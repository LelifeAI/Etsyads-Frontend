<!DOCTYPE html>
<html lang="en">

<head>

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">

<meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LeLife-Etsyads-AI</title>

    <!-- Chèn CSS từ thư mục static -->
	<link rel="stylesheet" href="/static/style.css">
        <script src="/static/js/script.js"></script>

    <style>
   

  body {
        	font-family: 'Arial', sans-serif;
       	 	background-color: #f4f4f9;
        	margin: 0;
        	padding: 0;
                padding-top: 60px; /* Đẩy nội dung xuống để không bị che bởi header */
		font-size: 16px; /* Cỡ chữ cơ bản */
   		line-height: 1.5; /* Dòng chữ thoáng hơn */
    }

h1, h2 {
    margin-top: 25px; /* Tạo khoảng cách phía trên tiêu đề */
    margin-bottom: 10px; /* Khoảng cách phía dưới tiêu đề */
}


html, body {
    max-width: 100%; /* Giới hạn chiều rộng */
    overflow-x: hidden; /* Ngăn cuộn ngang */
}
  
    }

.container {
    display: flex;
    align-items: center;
    margin: 20px auto; /* Giảm khoảng cách bên ngoài */
    width: 90%; /* Đảm bảo container chiếm tối đa 90% chiều rộng màn hình */
    max-width: 1200px; /* Giới hạn độ rộng tối đa cho container */
    padding: 1rem; /* Padding linh hoạt */
    background-color: white;
    border-radius: 10px;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    box-sizing: border-box; /* Đảm bảo padding không ảnh hưởng đến kích thước tổng */
    z-index: 1; /* Đặt ưu tiên thấp hơn menu */
    position: relative; /* Đặt container trong ngữ cảnh riêng */
    word-wrap: break-word; /* Bẻ dòng nếu cần */

}

/* Đảm bảo nội dung chính không che menu */
	.input-section,
	.result-section,
	.chart-section {
  	  position: relative;
 	   z-index: 1;
}

/* Căn chỉnh các thẻ div và section bên trong */
.input-section, .result-section, .chart-section, .threshold-section {
    margin-bottom: 10px;
    padding: 10px;
    background-color: #f9f9f9;
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box; /* Đảm bảo padding không làm thay đổi kích thước phần tử */
}
        
.flex-container {
            display: flex;
            justify-content: space-between;
            gap: 20px;
            flex-wrap: wrap;
}
       
 .section-header {
    	 	font-size: 1.2rem; /* Kích thước chữ */
    		font-weight: bold; /* In đậm chữ */
   	 	color: #000 !important; /* Đổi màu chữ sang đen và ưu tiên áp dụng */
    		margin-bottom: 10px; /* Khoảng cách dưới */
   	 	text-align: center; /* Căn giữa văn bản */
		z-index: 1; /* Đảm bảo không chồng lấn lên dropdown */
	        position: relative; /* Giữ header nằm trong container */
}

        
label {
            display: block;
            margin: 10px 0 5px;
            font-weight: bold;
        }

        input[type="text"], input[type="number"], input[type="date"] {
    width: calc(100% - 20px);
    padding: 10px;
    margin-bottom: 15px;
    border: 1px solid #ccc;
    border-radius: 4px;
    font-size: 16px;
}

/* Chỉnh phần nút bấm */
.button {
    background-color: #4caf50;
    color: white;
    padding: 12px 20px;
    margin-top: 20px;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    font-size: 16px;
    margin-left: 10px; /* Thêm khoảng cách với cạnh trái */
}

        .button:hover {
            background-color: #45a049;
        }
        .results, .proposals {
            padding: 15px;
            background-color: #f1f1f1;
            border-radius: 8px;
            margin-bottom: 10px;
        }

        .chart-container {
		text-align: center;
    		margin-top: 30px;        
}

        .chart {
            width: 100%;
            max-width: 500px;
            margin: auto;
        }
        .row {
            display: flex;
            justify-content: space-between;
            gap: 20px;
            margin-bottom: 20px;
	    padding-left: 20px; /* Thêm padding vào bên trái */
            padding-right: 20px; /* Thêm padding vào bên phải */
        }
        .row label {
            flex: 1;
            margin-right: 10px; /* Thêm khoảng cách giữa label và input */
        }
        .row input {
            flex: 2;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
            width: 100%;;
        }

.row div {
    margin-bottom: 0px;
    padding: 10px;
}

.row div label {
    display: block;
    font-weight: bold;
    margin-bottom: 0px;
}


/* Căn chỉnh các phần nhập dữ liệu */
.threshold-inputs {
   display: flex;
    justify-content: space-between;
    gap: 15px;
    margin-top: 20px;
    padding-left: 20px;
    padding-right: 20px;
}
.chart-section {
    margin-top: 20px;
    text-align: center;
}

.section-header {
    font-size: 1.5rem;
    color: #4CAF50;
    margin-bottom: 10px;
}

body {
    font-family: Arial, sans-serif;
    background-color: #f3f4f6;
    color: #333;
}

img {
    max-width: 100%;
    height: auto;
    display: block; /* Loại bỏ khoảng trắng dưới hình ảnh */
}


header {
    position: fixed; /* Cố định header trên cùng */
    top: 0; /* Đặt ở vị trí đầu trang */
    left: 0; /* Căn trái */
    width: 100%; /* Chiếm toàn bộ chiều ngang */
    z-index: 1000; /* Đảm bảo header hiển thị trên mọi phần tử khác */
    background-color: black; /* Màu nền */
    color: white; /* Màu chữ */
    padding: 30px 20px; /* Tạo khoảng cách bên trong */
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); /* Tạo hiệu ứng đổ bóng */
    justify-content: space-between; /* Căn đều khoảng cách giữa các nút */
    align-items: center;

}

/* Header */
header h1 {
    text-align: center;
    padding: 20px;
    background-color: #333;
    color: white;
    margin: 0;
    font-size: 24px;
}


.input-section {
    display: flex; /* Sử dụng flex để căn chỉnh nội dung */
    justify-content: center; /* Căn giữa nội dung theo chiều ngang */
    align-items: center; /* Căn giữa nội dung theo chiều dọc */
    margin: 10px auto; /* Giảm khoảng cách ngoài để khung gọn hơn */
    padding: 5px 15px; /* Giảm padding để phù hợp với nội dung */
    max-width: fit-content; /* Đảm bảo khung vừa với nội dung */
    background-color: #f9f9f9; /* Màu nền */
    border-radius: 8px; /* Bo góc */
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1); /* Tạo đổ bóng */
    text-align: center; /* Căn giữa văn bản */
    font-size: 1.2rem; /* Cỡ chữ phù hợp */
    font-weight: bold; /* In đậm văn bản */
    color: #4CAF50; /* Màu chữ */
    box-sizing: border-box; /* Đảm bảo padding không làm thay đổi kích thước */
}

.container {
    background-color: white;
    border-radius: 10px;
    padding: 5px; /* Giảm padding để nội dung gọn hơn */
    max-width: 1400px; /* Giới hạn chiều rộng để gọn hơn */
    margin: 10px auto; /* Căn giữa trang */
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); /* Tạo đổ bóng nhẹ */
    z-index: 1; /* Đặt ưu tiên thấp hơn menu dropdown */


}

.input-section, .result-section, .chart-section {
    margin-bottom: 30px;
}

.button {
    background-color: #4caf50;
    color: white;
    padding: 10px 20px;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    font-size: 16px;
}

.button:hover {
    background-color: #45a049;
}

.results, .proposals {
    background-color: #f9f9f9;
    border-radius: 8px;
    padding: 15px;
    margin-top: 10px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.chart-container {
    text-align: center;
    margin-top: 20px;
}

.flex-container {
    display: flex;
    justify-content: space-around;
    flex-wrap: wrap;
    gap: 20px;
}


input[type="number"], input[type="text"] {
    padding: 10px;
    border-radius: 5px;
    border: 1px solid #ccc;
    width: calc(100% - 24px);
    margin-bottom: 10px;
    font-size: 16px;
}

.notification {
    background-color: #4caf50;
    color: white;
    padding: 15px;
    border-radius: 5px;
    position: fixed;
    top: 20px;
    left: 50%;
    transform: translateX(-50%);
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    z-index: 1000;
}

#change-password-form {
    display: none;
}

#show-change-password-btn {
    display: block;
}

.show-form #change-password-form {
    display: block;
}


.content-section {
        margin: 20px;
        padding: 20px;
        background-color: white;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

input {
        width: 100%;
        padding: 10px;
        margin: 10px 0;
        border: 1px solid #ccc;
        border-radius: 4px;
    }

    .button {
        background-color: #4CAF50;
        color: white;
        padding: 12px 20px;
        border: none;
        border-radius: 4px;
        cursor: pointer;
    }

    .button:hover {
        background-color: #45a049;
    }

/* Đặt menu ở chính giữa trang */
nav {
    position: absolute; /* Cho phép điều chỉnh vị trí bằng top và left */
    top: 50%; /* Căn giữa theo chiều dọc */
    left: 50%; /* Căn giữa theo chiều ngang */
    transform: translate(-50%, -50%); /* Điều chỉnh tâm về chính giữa */
}

/* Vị trí nút Demos */
/* Chỉnh kích thước và căn chỉnh menu dropdown */
/* Căn giữa và cố định vị trí các nút trong menu */
.nav-bar {
    display: flex; /* Sử dụng Flexbox để bố trí các nút */
    flex-wrap: nowrap; /* Không cho phép xuống dòng */
    justify-content: space-evenly; /* Phân bố khoảng cách đều giữa các nút */
    align-items: center; /* Căn giữa theo chiều dọc */
    list-style: none; /* Xóa bullet points */
    padding: 10px 15px; /* Khoảng cách bên trong menu */
    white-space: nowrap; /* Ngăn chữ ngắt dòng */
    overflow: hidden; /* Ngăn nội dung tràn */
    color: white;
    gap: 10px;              /* Khoảng cách giữa các nút */

}

/* Chỉnh khoảng cách giữa Lelife và Demos */
.nav-bar li {
    margin: 0 5px; /* Khoảng cách giữa các nút */
    flex-shrink: 1; /* Cho phép các nút co giãn khi không đủ không gian */
    list-style: none;
    display: inline-block;
}

.nav-bar li:nth-child(3) { /* Áp dụng cho mục Tài Liệu */
    margin-left: 20px;
}

.nav-bar a {
    display: inline-block;
    text-decoration: none; /* Bỏ gạch chân */
    font-size: 1rem; /* Cỡ chữ mặc định */
    color: white; /* Màu chữ */
    padding: 10px 15px; /* Khoảng cách bên trong nút */
    white-space: nowrap; /* Ngăn chữ ngắt dòng */
    border-radius: 5px; /* Bo góc nút */
    background-color: #4CAF50; /* Màu nền nút */
    text-align: center;
    flex-shrink: 1; /* Thu nhỏ nút nếu không đủ không gian */
    min-width: 80px; /* Chiều rộng tối thiểu của nút */
    max-width: 200px; /* Giới hạn chiều rộng tối đa */
    overflow: hidden; /* Ngăn chữ tràn ra ngoài */
    text-overflow: ellipsis; /* Thêm dấu "..." nếu chữ quá dài */
}

.nav-bar a:hover {
    background-color: #45a049; /* Màu khi rê chuột vào */
}

.nav-bar li:nth-child(2) { /* Áp dụng cho nút Demos */
    margin-left: 20px; /* Tăng khoảng cách bên trái */
}

img {
    max-width: 100%;
    height: auto;
    display: block; /* Loại bỏ khoảng trắng dưới hình ảnh */
}

html, body {
    max-width: 100%; /* Giới hạn chiều rộng */
    overflow-x: hidden; /* Ngăn cuộn ngang */
    transform: scale(1);
    transform-origin: top left;
}

/* Responsive: Tối ưu khoảng cách trên màn hình nhỏ */
/* Responsive adjustments */
@media (max-width: 768px) {
    .nav-bar a {
        font-size: 0.9rem; /* Giảm cỡ chữ */
        padding: 8px 12px; /* Giảm padding */
    }
}

@media (max-width: 480px) {
    .nav-bar a {
        font-size: 0.8rem; /* Tiếp tục giảm kích thước chữ */
        padding: 5px 10px; /* Giảm thêm padding */
    }
}

.auth-links a {
    color: white;
    font-weight: bold;
    margin-left: 1050px;
}

.auth-links a:hover {
    color: #4CAF50;
}

/* Nút Demos */
.nav-bar li a {
    display: block;
    color: #333; /* Màu chữ tối */
    background-color: #f7f7f7;
    text-align: center;
    padding: 12px 14px;
    border-radius: 5px;
    text-decoration: none;
    font-size: 16px;
    font-weight: bold;

}

.nav-bar li a:hover {
    color: #000; /* Màu chữ khi rê chuột vào */
    background-color: #575757; /* Màu nền khi rê chuột */}

/* Căn chỉnh nút Đăng nhập/Đăng ký */
.auth-buttons {
    margin-left: auto;
    display: flex;
    gap: 10px;
}

.auth-buttons a {
    background-color: #4caf50;
    color: white;
    padding: 8px 12px;
    text-decoration: none;
    border-radius: 5px;
    font-size: 14px;
    transition: background-color 0.3s ease;
}

.auth-buttons a:hover {
    background-color: #45a049;
}


/* Hiển thị dropdown khi rê chuột hoặc click */
.dropdown:hover .dropdown-menu,
.dropdown.open .dropdown-menu {
    display: block;
    z-index: 9999; /* Menu con luôn nằm trên các thành phần khác */

}

/* Menu con */
.dropdown-menu {
    display: none;    /* Ẩn menu mặc định */
    position: absolute; 	/* Đảm bảo menu xuất hiện tại vị trí cố định */
    top: 100%; 	/* Đặt menu ngay bên dưới mục "Demos" */
    right: 20;
    left: 0px; /* Di chuyển vào bên trái một chút */
    background-color: #ffffff;
    border: 1px solid #ddd;
    border-radius: 5px;
    min-width: 130px; /* Chiều rộng tối thiểu */
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    z-index: 9999; /* Ưu tiên hiển thị cao nhất */
    padding: 4px 5px; /* Chỉnh độ rộng cho dropdown menu */


}

.dropdown-menu * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

/* Dropdown items */
.dropdown-menu li a {
    color: #333;
    padding: 0px 15px;
    font-size: 14px;
    text-decoration: none;
    display: block;
    background-color: transparent; /* Nền trong suốt */
    margin: 0; /* Loại bỏ khoảng cách không cần thiết */
    width: 100%; /* Đảm bảo chiều ngang đồng đều */
    min-width: 120px; /* Chiều rộng tối thiểu */
    text-align: left; /* Căn chữ về bên trái */
   

}

.dropdown-menu li a:hover {
    background-color: #f0f0f0; /* Hiển thị nền khi hover */
    color: #000; /* Màu chữ khi hover */

}

/* About Section Styling */
#about-section {
    padding: 20px;
    background-color: #ffffff;
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    margin: 20px auto;
    max-width: 800px;

}

/* Chỉ định ảnh trong trang Giới Thiệu */
#about-section .profile-picture {
    display: flex;
    justify-content: center; /* Căn giữa nội dung */
    margin-top: 20px;
}

#about-section .profile-picture img {
    width: 180px;
    height: 180px;
    border-radius: 50%;
    border: 4px solid #4CAF50;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
}


/* Styling cho About Section */
.about-container {
    display: flex;
    align-items: center;
    justify-content: space-between;
    background-color: #ffffff;
    padding: 20px;
    border-radius: 10px;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    margin: 20px auto;
    max-width: 800px;
}

.profile-picture img {
    width: 150px;
    height: 150px;
    border-radius: 50%;
    border: 4px solid #4CAF50;
    object-fit: cover;
}

.about-content {
    flex: 1;
    margin-left: 20px;
}

.about-content h2 {
    color: #333;
    font-size: 24px;
    margin-bottom: 10px;
}

.about-content p {
    font-size: 16px;
    color: #555;
    line-height: 1.5;
}

/* Show dropdown on hover */
.dropdown:hover .dropdown-menu {
    display: block;
}


/* Nội dung chính chỉnh z-index thấp hơn dropdown */
.input-section {
    margin-bottom: 30px;
    padding: 20px;
    background-color: #f9f9f9;
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

   /* Chỉnh lại bảng dữ liệu */
table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 20px;
}

th, td {
    padding: 12px;
    text-align: left;
    border: 1px solid #ddd;
}

th {
    background-color: #f4f4f4;
}


#login-section, #change-password-section {
    margin: 20px 0;
    padding: 20px;
    background-color: #f9f9f9;
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    z-index: 10; /* Hiển thị trên các phần khác nếu cần */
}

.action-buttons {
    display: flex;
    justify-content: center; /* Căn giữa theo chiều ngang */
    margin-top: 20px; /* Thêm khoảng cách phía trên */
    gap: 15px; /* Khoảng cách giữa 2 nút */
}

.action-buttons button {
    padding: 12px 24px;
    font-size: 16px;
    border-radius: 8px;
    border: none;
    cursor: pointer;
    background-color: #4caf50;
    color: white;
    transition: background-color 0.3s ease;
}

.action-buttons button:hover {
    background-color: #45a049;
}

.submenu-list {
    left: calc(100% - 20px); /* Dịch menu con sang trái 20px */
}

.submenu-list li a {
    padding-left: 10px; /* Thêm khoảng cách bên trái cho text */
}

.fixed-title {
    position: fixed; /* Đặt tiêu đề cố định */
    top: 10px; /* Cách phía trên 10px */
    left: 10px; /* Cách bên trái 10px */
    margin: 0; /* Loại bỏ margin mặc định */
    font-size: 1rem; /* Cỡ chữ phù hợp */
    font-weight: bold; /* In đậm tiêu đề */
    color: black; /* Màu chữ xanh lá */
    background-color: white; /* Nền trắng cho dễ nhìn */
    padding: 5px 15px; /* Tạo khoảng cách bên trong cho tiêu đề */
    border-radius: 5px; /* Bo góc nhẹ */
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1); /* Tạo đổ bóng nhẹ */
    z-index: 1000; /* Đảm bảo tiêu đề luôn nằm trên các phần tử khác */
}

    </style>

</head>

<header>

    <div id="notification" style="display: none;" class="notification">
        <p id="notification-message"></p>
    </div>
 
   <!-- Menu Điều Hướng -->
<nav>
    <ul class="nav-bar">
        <!-- Menu LeLife -->
        <li class="dropdown">
            <a href="#" id="lelifetoggle">LeLife ▼</a>
            <ul class="dropdown-menu" id="lelifemenu">
                <li><a href="./index.html" onclick="showSection('about-ai-section')">Giới thiệu</a></li>
                <li><a href="#" onclick="showSection('login-section')">Đăng Nhập</a></li>
            </ul>
        </li>

        <!-- Menu Demos -->
        <li class="dropdown">
            <a href="#" id="demostoggle">Demos ▼</a>
            <ul class="dropdown-menu" id="demosmenu">
                <!-- EtsyAds-AI -->
                <li class="submenu">
                    <a href="./etsyadsai.html" onclick="showSection('etsyads-ai-section')">EtsyAds-AI ▼</a>
                    <ul class="submenu-list">
                        <li><a href="#" onclick="showSection('history-section')">Lịch Sử Phân Tích</a></li>
                    </ul>
                </li>
            </ul>
        </li>

        <!-- Menu Hướng Dẫn -->
        <li class="dropdown">
    		<a href="#" id="guidetoggle">Hướng dẫn ▼</a>
    		<ul class="dropdown-menu" id="guidemenu">
       	 		<li><a href="./sach.html" onclick="showSection('sach-ai-section')">Sách</a></li>
        		<li><a href="./coaching.html" onclick="showSection('coaching-section')">Coaching</a></li>
       			<li><a href="./congcu.html" onclick="showSection('congcu-section')">Công Cụ</a></li>
    		</ul>
	</li>
    </ul>
</nav>



</header>


<body>



    <section id="about-section" class="content-section">
        <div class="profile-picture">
            <img src="/static/images/profile.jpg" alt="Ảnh của bạn" style="border-radius: 50%; width: 180px; height: 180px;">
        </div>
        <h1>Giới thiệu</h1>
         <p> <strong>Tôi là LeLife, người sáng lập LeLifeAI, nơi chia sẻ về AI và cách kiếm tiền online. </strong></p>
 <p class="spaced-heading"> LeLife có thể hiểu dí dỏm là "Lẽ Sống", hay "Cuộc Đời Online", hoặc "Cuộc đời của Le". Giải thích theo góc nhìn nào, nào cũng đều có ý hay của nó! Ngẫm thấy phải mất cả chục năm mới tìm được chân lý của đời mình. Một ngành nghề phù hợp, ít vốn, cơ hội nhiều, không cần phải có quan hệ vẫn có thể kiếm cơm đều đều mà không cần phải lệ thuộc quá nhiều vào 1 công việc cố định nào đó. <strong> Cuộc đời mình, có lẽ không gì có thể phù hợp hơn là: Kinh doanh online...</strong></p>

   <h2>Tôi chỉ có 1 con đường. Bạn thì sao? </h2>
<p>Không sinh ra từ vạch đích, cũng không có quan hệ rộng, là người hướng nội, học cũng bình thường và không nổi trội lắm. Có lẽ thứ quý giá cuối cùng còn sót lại chỉ là 3 từ: <strong> "KHÔNG BỎ CUỘC". Vậy làm sao để có thu nhập bằng hay cao hơn Giám đốc một cty? Nhiều khi tôi cũng tự hỏi bản thân mình như vậy!</strong> </p>

<p class="spaced-heading"> Năm 2010, vừa tốt nghiệp ra trường, làm ở Samsung được 6 năm, lương thực lãnh chưa tới 14 triệu đồng...Nhiều lúc bị stress, không biết phải làm sao để tăng thu nhập cá nhân mình lên, vì thật sự, mình không nổi trội trong công việc. Tôi đã tự tìm hiểu nhiều hướng đi mới, với mong ước làm sao để không phụ thuộc nguồn thu nhập duy nhất từ lương, và có thể tăng lên nhiều hơn như 100 triệu/tháng? Với mơ ước đó, cùng với đam mê, chịu khó, không sợ thất bại, tôi đã nghiên cứu cách kiếm tiền online suốt 10 năm qua. Dĩ nhiên bài học về thất bại cũng khá nhiều....hehe </p>

<p class="spaced-heading"> Tôi nhớ có lần ba mình bi bệnh nặng phải đi mổ mà không có tiền, phải mượn bạn 5triệu đồng để cho ba đi viện.Thương ba nhiều! Tôi cũng nhớ là, vì thu nhập kém, mà bạn gái mình cũng chia tay...Nói chung là " TIỀN " đó. Cũng vì vậy, mà Ý CHÍ, mình khá cao... thà chết chứ KHÔNG BỎ CUỘC ....THÀ LIỀU  CHỨ KHÔNG CHỊU THU NHẬP THẤP ĐƯỢC ^^. </p>

   <h2> Thành quả sẽ đến nếu bạn có ý chí </h2>

<p class="spaced-heading"> Và thành quả đã đến, miệt mài nghiên cứu từ 2016 đến 2023, tôi đã biết thế nào là thu nhập ngàn USD online. Tôi cũng cảm nhận, 2025 mình đã đủ kiến thức, kinh nghiệm, lẫn trải nghiệm không những để tự làm mà còn có thể chia sẻ cách làm của mình cho nhiều người. Tôi chắc chắn, các bạn newbie có thể học tập, làm theo, đạt hiệu quả nhanh hơn rất nhiều thay vì tự mày mò, rồi lại mất 10 năm như tôi không chừng. Đó là lý do vì sao tôi đã thành lập kênh youtue tên Lelife từ 2023 đến nay cũng gần 100k sub. Tôi cảm thấy hạnh phúc hơn vì đều đó, có lẽ vì tôi được nổi tiếng hơn ^.^ hehe. </p>

<p class="spaced-heading"> Năm 2024, có 1 cái khá thú vị, bạn có thấy AI phát triển rất vượt bậc, AI có thể giúp chúng ta làm được rất nhiều đều, từ việc kinh doanh online, bán hàng, đến các việc thiết kế hình ảnh, website, lập trình, dịch thuật và rất rất nhiều việc khác... Nếu bạn không ứng dụng AI, bạn sẽ tuột hậu ở tất cả mọi lĩnh vực. </p>


<p class="spaced-heading"> Với nền tảng là thạc sỹ công nghệ...Tôi không thể đứng yên, thiết nghĩ mình phải áp dụng các kiến thức bản thân, để làm gì đó hữu ích giữa AI và kinh doanh Online. Giúp người bán hàng quản lý công việc kinh doanh của mình hiệu quả hơn chẵn hạn</p>

 <p class="spaced-heading"> Đó là lý do vì sao LeLifeAI.com đã ra đời .... <strong>Tôi nghĩ ngoài đời này có thầy Thích Minh Tuệ nổi tiếng, thì online có thầy "Thích online" chắc là nghệ danh phù hợp với Lelife...Thích nghiên cứu, thích kiếm tiền online, làm hoài không biết mệt là tôi. <mark> Nhiều đêm liên tiếp, cứ ngồi nghiên cứu đến 2-3h đêm là bình thường. </mark> </strong> </p> 

<p class="spaced-heading"> Với tinh thần hăng say đó, tôi đã nghiên cứu tạo ra thành công ra công cụ AI đầu tiên sau 3 tháng, công cụ này có thể giúp các seller bán hàng phân tích quảng cáo tự động trên Etsy (EtsyAds-AI) quảng cáo hiệu quả hơn. Chắc chắn là, vài tháng kế, tôi sẽ tạo thêm nhiều tool bằng AI khác nữa và tích hợp trên website này....cụ thể sẽ về POD, Etsy, Amazon và AI nhé...Tôi cũng sẽ chia sẻ cho các bạn cách thiết kế ứng dụng, thiết kế website bằng AI kết hợp với Kinh doanh Online. </p>

 <h2>Bạn có muốn tôi chia sẻ kiến thức về online 10 năm qua cho bạn không?</h2>

<p>Bạn sẽ tiết kiệm được khá nhiều thời gian đấy. Phật pháp có câu: "Khi học trò đã sẵn sàng thì người thầy sẽ xuất hiện" </p>
<p><strong>Nếu bạn có bất kỳ câu hỏi nào, đừng ngần ngại liên hệ với tôi qua email: quangleblog@gmail.com, sdt: 094.196.3399 (zalo). BẬT MÍ LÀ MÌNH CÓ NHẬN COACHING VỀ POD, ETSY VÀ AMAZON</strong>.</p>
<p> <strong> Một số lĩnh vực kiếm tiền online mà tôi đã từng làm hơn 10 năm qua thành công:</strong></p>

<p> <mark>Ngành online 1: Bán hàng POD trên Etsy.</mark></p>

<p> Ngành online 2: Bán hàng POD trên eBay.</p>

<p> <mark>Ngành online 3: Bán hàng POD trên Amazon.</mark></p>

<p> Ngành online 4: Bán quần áo trên Merch By Amazon.</p>

<p> Ngành online 5: Kiếm tiền online tại nhà bằng nghề Freelance tester.</p>

<p> Ngành online 6: Bán sách trên Amazon Kindle.</p>

<p> Ngành online 7: Phát hành sách bán trong nhà sách Việt Nam. </p>

<p> Ngành online 8: Kiếm tiền bằng nhận quảng cáo từ Youtube. </p>

<p> Ngành tay trái 9: Coaching Online bằng cách xây dựng thương hiệu trên Youtube. </p>

<p> Ngành tay trái 10: Kiếm tiền qua xây dựng các khoá học trên Udemy. </p>

<p> Ngành tay trái 11: Kiếm tiền cách làm Affiliate Marketing. </p>

<p>Trong đó, bán hàng POD trên Etsy, Amazon là phương pháp mang lại thu nhập cao. </p>


<p class="spaced-heading">Về mảng POD, tôi có 7 năm kinh nghiệm làm kinh doanh POD trên nhiều nền tảng khác nhau như Amazon, Etsy và eBay. Trong đó, Etsy là nền tảng kinh doanh thành công nhất với Doanh thu hơn <strong>300.000$ hơn 2 năm.</strong> </p>

<p class="spaced-heading">Từ thành công đó, tôi đã chia sẻ kiến thức của mình trên nhiều nền tảng khác nhau như Udemy, Youtube...được rất nhiều người ủng hộ. </p>

<p><h2><mark>MỌI NGƯỜI NGHĨ GÌ VỀ LELIFE?</mark></h2></p>
<img src="/static/images/review_coach1.jpg" alt="Review khoá học Etsy từ A-Z">
<p><h2><mark>VÌ SAO BẠN BIẾT LELIFE?</mark></h2></p>
<img src="/static/images/review_coach2.jpg" alt="Review Lelife Etsy từ A-Z">

<p class="spaced-heading">Tôi cũng có viết sách về Etsy: " Cách Bán Hàng Trên Sàn Etsy Từ A-Z | Bí quyết khởi nghiệp với ngân sách nhỏ" đang bán ở nhà sách Fahasa, Tiki, Lazada... Và Amazon Kindle. Đây là quyển sách đầu tiên về Etsy chính thức được cấp phép bởi Bộ Công thương, và được bán ở nhà sách Fahasa ở Việt Nam. </p>
<p>▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬</p>
<p>  <i><mark>►MUA SÁCH ETSY</mark></i></p>
<p>  <i>Liên hệ: 094.196.3399 (zalo)</i></p>
<p>  <i>STK: 19035211449011 (Techcombank)</i></p>
<p>  <i>Nội dung chuyển khoản: Họ tên + Mua sách Etsy</i></p>
<p>  <i>Cách nhận sách: Gửi Họ tên, địa chỉ và số điện thoại người nhận qua Zalo</i></p>
<p>▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬</p>
<p>  <i><mark>► HỖ  TRỢ COACHING POD, ETSY, AMAZON:</mark></i></p>
<p>  <i>+ SDT: 0941963399 (ZALO)</i></p>
<p>  <i>+  Facebook:   quang.leduy.9843  </i></p>
<p>  <i>+ Học phí: liên hệ</i></p>
<p>▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬</p>

    </section>

<section id="login-section" class="content-section" style="display: none;">
    <div class="login-section">
        <h3>Đăng Nhập</h3>
        <label for="username">Tên Đăng Nhập:</label>
        <input type="text" id="username" placeholder="Nhập tên đăng nhập">
        <label for="password">Mật Khẩu:</label>
        <input type="password" id="password" placeholder="Nhập mật khẩu">
        <button class="button" onclick="loginUser()">Đăng Nhập</button>
        <button class="button" onclick="registerUser()">Đăng Ký</button>
    </div>
</section>


<section id="history-section" class="content-section" style="display: none;">
    <h3>Lịch Sử Phân Tích</h3>
    
    <!-- Thêm canvas cho biểu đồ -->
    <canvas id="historyChart" style="max-width: 100%; margin-bottom: 20px;"></canvas>
    
    <!-- Bảng dữ liệu phân tích -->
    <table id="history-table" border="1">
        <thead>
            <tr>
                <th>Thời Gian</th>
                <th>CTR (%)</th>
                <th>CR (%)</th>
                <th>CPP (USD)</th>
                <th>ROI (%)</th>
                <th>Fee Ads (%)</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>
    <button class="button" onclick="deleteHistory()">Xóa Lịch Sử</button>
</section>


       

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
    const API_URL = "https://etsyads-backend.onrender.com";

//Hiển thị thông báo
function showNotification(message, type = 'success') {
    const notification = document.getElementById('notification');
    const messageElement = document.getElementById('notification-message');
    
    messageElement.textContent = message;
    notification.style.backgroundColor = type === 'success' ? '#4caf50' : '#f44336';
    notification.style.display = 'block';

    setTimeout(() => {
        notification.style.display = 'none';
    }, 3000);
}

// Hàm đăng ký người dùng
async function registerUser() {
    const username = document.getElementById('username').value.trim();
    const password = document.getElementById('password').value.trim();

    if (!username || !password) {
        showNotification("Vui lòng nhập đầy đủ thông tin!", "error");
        return;
    }

    try {
        const response = await fetch(`${API_URL}/register/`, {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ username, password })
        });

        if (response.ok) {
            showNotification("Đăng ký thành công! Hãy đăng nhập.", "success");

            // Ẩn phần Đăng Ký
            document.getElementById('login-section').style.display = 'none';
        } else {
            const result = await response.json();
            showNotification(`Lỗi: ${result.detail}`, "error");
        }
    } catch (error) {
        console.error("Lỗi khi đăng ký:", error);
        showNotification("Lỗi kết nối. Vui lòng thử lại.", "error");
    }
}

// Hàm đăng nhập người dùng
async function loginUser() {
    const username = document.getElementById('username').value.trim();
    const password = document.getElementById('password').value.trim();

    if (!username || !password) {
        showNotification("Vui lòng nhập đầy đủ thông tin!", "error");
        return;
    }

    try {
        const response = await fetch(`${API_URL}/login/`, {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ username, password })
        });

        if (response.ok) {
            const result = await response.json();
            localStorage.setItem("accessToken", result.access_token);  // Lưu token vào localStorage
            showNotification("Đăng nhập thành công!", "success");

            // Ẩn form Đăng Nhập
            document.getElementById('login-section').style.display = 'none';

            // Hiển thị nút Đăng Xuất
            document.getElementById('logout').style.display = 'block';
        } else {
            const errorData = await response.json();
            showNotification(`Lỗi: ${errorData.detail}`, "error");
        }
    } catch (error) {
        console.error("Lỗi khi đăng nhập:", error);
        showNotification("Lỗi kết nối. Vui lòng thử lại.", "error");
    }
}


async function changePassword() {
    const username = document.getElementById('username').value;
    const oldPassword = document.getElementById('old-password').value;
    const newPassword = document.getElementById('new-password').value;

    if (!username || !oldPassword || !newPassword) {
        showNotification("Vui lòng nhập đầy đủ thông tin!", "error");
        return;
    }

    try {
        const response = await fetch(`${API_URL}/change_password/`, {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ username, old_password: oldPassword, new_password: newPassword }),
        });

        if (response.ok) {
            showNotification("Đổi mật khẩu thành công!", "success");

            // Ẩn phần Đổi Mật Khẩu
            document.getElementById('change-password-section').style.display = 'none';
        } else {
            alert("Lỗi khi đổi mật khẩu.");
        }
    } catch (error) {
        console.error("Lỗi khi đổi mật khẩu:", error);
        alert("Lỗi kết nối. Vui lòng thử lại.");
    }
}

//lấy danh sách người dùng
async function getUsers() {
    try {
        const response = await fetch('/users/');
        const users = await response.json();

        if (Array.isArray(users)) {
            users.forEach(user => {
                console.log(user);
            });
        } else {
            console.error('Dữ liệu không phải là mảng:', users);
        }
    } catch (error) {
        console.error('Lỗi khi lấy dữ liệu người dùng:', error);
    }
}


const element = document.getElementById('some-element');
if (element) {
    element.style.display = 'block';
}

function logoutUser() {
    const token = localStorage.getItem("accessToken");

    if (!token) {
        showNotification("Bạn chưa đăng nhập!", "error");
        return;
    }

//lấy danh sách người dùng
async function fetchUsers() {
    const token = localStorage.getItem("accessToken");
    if (!token) {
        showNotification("Vui lòng đăng nhập!", "error");
        return;
    }

    try {
        const response = await fetch(`${API_URL}/users/`, {
            method: "GET",
            headers: { "Authorization": `Bearer ${token}` }
        });

        if (response.ok) {
            const users = await response.json();
            const userTable = document.querySelector("#user-table tbody");
            userTable.innerHTML = "";

            users.forEach(user => {
                const row = `
                    <tr>
                        <td>${user.id}</td>
                        <td>${user.username}</td>
                        <td><button onclick="deleteUser(${user.id})">Xóa</button></td>
                    </tr>
                `;
                userTable.insertAdjacentHTML('beforeend', row);
            });
        } else {
            const errorData = await response.json();
            showNotification(`Lỗi: ${errorData.detail}`, "error");
        }
    } catch (error) {
        console.error("Lỗi khi tải danh sách người dùng:", error);
        showNotification("Lỗi kết nối. Vui lòng thử lại.", "error");
    }
}


// gửi yêu cầu xóa người dùng qua API
async function deleteUser(userId) {
    const token = localStorage.getItem("accessToken");
    if (!token) {
        showNotification("Vui lòng đăng nhập!", "error");
        return;
    }

    if (!confirm("Bạn có chắc chắn muốn xóa người dùng này?")) return;

    try {
        const response = await fetch(`${API_URL}/users/${userId}`, {
            method: "DELETE",
            headers: { "Authorization": `Bearer ${token}` }
        });

        if (response.ok) {
            showNotification("Xóa người dùng thành công!", "success");
            fetchUsers();  // Làm mới danh sách sau khi xóa
        } else {
            showNotification("Lỗi khi xóa người dùng.", "error");
        }
    } catch (error) {
        console.error("Lỗi khi xóa người dùng:", error);
        showNotification("Lỗi kết nối. Vui lòng thử lại.", "error");
    }
}


    // Gọi API để đăng xuất (nếu backend có hỗ trợ)
    fetch(`${API_URL}/logout/`, { method: "POST", headers: { "Authorization": `Bearer ${token}` } })
        .then(response => {
            if (response.ok) {
                localStorage.removeItem("accessToken");
                showNotification("Đã đăng xuất thành công!", "success");

                // Hiển thị lại form Đăng Nhập
                document.getElementById('login-section').style.display = 'block';
                document.querySelectorAll('.content-section').forEach(section => {
                    section.style.display = 'none';
                });
            } else {
                showNotification("Lỗi khi đăng xuất!", "error");
            }
        })
        .catch(error => {
            console.error("Lỗi khi đăng xuất:", error);
            showNotification("Lỗi kết nối. Vui lòng thử lại.", "error");
        });
}

document.querySelectorAll('nav a').forEach(link => {
    link.addEventListener('click', event => {
        const target = event.currentTarget;

        // Lấy URL hiện tại
        const currentUrl = window.location.href;

        // Kiểm tra nếu có lặp "frontend/frontend"
        if (currentUrl.includes('frontend/frontend')) {
            // Loại bỏ lặp "frontend/frontend"
            const correctedUrl = currentUrl.replace('/frontend/frontend', '/frontend');
            window.location.href = correctedUrl; // Chuyển hướng về URL chuẩn
        }
    });
});

// Đảm bảo menu Demos không bị ẩn khi click vào
document.querySelectorAll('.dropdown > a').forEach(function(element) {
    element.addEventListener('click', function(event) {
        event.preventDefault();
        const parentDropdown = this.parentElement;
        parentDropdown.classList.toggle('open');
    });
});

// Đóng menu khi click ra ngoài
document.addEventListener('click', function(event) {
    const dropdowns = document.querySelectorAll('.dropdown');
    dropdowns.forEach(function(dropdown) {
        if (!dropdown.contains(event.target)) {
            dropdown.classList.remove('open');
        }
    });
});

function showSection(sectionId) {
    // Ẩn tất cả các section
    const sections = document.querySelectorAll('section');
    sections.forEach(section => {
        section.style.display = 'none';
    });

    // Hiển thị phần được chọn (ví dụ: about-section)
    const targetSection = document.getElementById(sectionId);
    if (targetSection) {
        targetSection.style.display = 'block';
    }

    // Nếu chọn "about-section", ẩn tất cả các phần dư thừa khác
    if (sectionId === 'about-section') {
        // Ẩn các thành phần không liên quan
        document.querySelectorAll('.input-section, .result-section, .chart-section, .action-buttons, .threshold-section, .row')
            .forEach(el => el.style.display = 'none');

        // Hiển thị Giới Thiệu
        const aboutSection = document.getElementById('about-section');
        if (aboutSection) {
            aboutSection.style.display = 'block';
        }
    }
}


const charts = {};
let chartInstances = [];
let comparisonChart = null;

// Xử lý sự kiện click vào nút Demos
document.getElementById('demos-toggle').addEventListener('click', function (e) {
    e.preventDefault();
    const menu = document.getElementById('demos-menu');
    menu.style.display = menu.style.display === 'block' ? 'none' : 'block';
});

// Ẩn menu khi click ra ngoài
document.addEventListener('click', function (e) {
    const toggle = document.getElementById('demos-toggle');
    const menu = document.getElementById('demos-menu');

    if (!toggle.contains(e.target) && !menu.contains(e.target)) {
        menu.style.display = 'none';
    }
});

// Kiểm tra trạng thái đăng nhập khi tải trang
document.addEventListener("DOMContentLoaded", async () => {
    await refreshAccessToken();

    const token = localStorage.getItem("accessToken");
    if (token) {
        document.getElementById('logout').style.display = 'block';
        document.getElementById('login-section').style.display = 'none';
        showNotification("Đã đăng nhập", "success");
    }
});

//Gọi hàm này khi người dùng nhấp vào tab Lịch Sử Phân Tích
document.addEventListener("DOMContentLoaded", () => {
    console.log("Trang đã tải xong. Không hiển thị form mặc định.");
    document.querySelector('a[href="#history-section"]').addEventListener('click', fetchHistory);
});

// Hiển thị nút Đăng Xuất nếu người dùng đã đăng nhập
    document.addEventListener("DOMContentLoaded", () => {
        const token = localStorage.getItem("accessToken");
        if (token) {
            document.querySelector('a[href="#logout"]').style.display = 'block';
        } else {
            document.querySelector('a[href="#logout"]').style.display = 'none';
        }
    });


document.addEventListener("DOMContentLoaded", () => {
    const urlParams = new URLSearchParams(window.location.search);
    const section = urlParams.get('section');

    if (section) {
        showSection(section);
    }
});


// Hàm lấy lịch sử phân tích
async function fetchHistory() {
    try {
        const response = await fetch(`${API_URL}/history/`);
        if (!response.ok) {
            throw new Error(`Lỗi khi tải lịch sử: ${response.status}`);
        }
        const history = await response.json();

        console.log("Dữ liệu nhận từ API:", history); // Thêm log kiểm tra

        const historyTable = document.querySelector("#history-table tbody");
        historyTable.innerHTML = "";

        if (history.length === 0) {
            historyTable.innerHTML = "<tr><td colspan='6'>Không có dữ liệu phân tích.</td></tr>";
            return;
        }

        history.forEach(entry => {
            const row = `
                <tr>
                    <td>${new Date(entry.timestamp).toLocaleString()}</td>
                    <td>${entry.ctr.toFixed(2)}%</td>
                    <td>${entry.cr.toFixed(2)}%</td>
                    <td>$${entry.cpp.toFixed(2)}</td>
                    <td>${entry.roi.toFixed(2)}%</td>
                    <td>${entry.fee_ads.toFixed(2)}%</td>
                </tr>
            `;
            historyTable.insertAdjacentHTML('beforeend', row);
        });

        console.log("Đã hiển thị dữ liệu lên bảng.");
    } catch (error) {
        console.error("Lỗi khi tải lịch sử:", error);
    }
}


// Định nghĩa hàm deleteHistory
   async function deleteHistory() {
    if (!confirm("Bạn có chắc chắn muốn xóa toàn bộ lịch sử?")) return;

    try {
        const response = await fetch(`${API_URL}/history/`, { method: "DELETE" });

        if (response.ok) {
            showNotification("Lịch sử đã được xóa thành công!", "success");
            await fetchHistory();  // Làm mới bảng sau khi xóa
        } else {
            showNotification("Lỗi khi xóa lịch sử.", "error");
        }
    } catch (error) {
        console.error("Lỗi khi xóa lịch sử:", error);
        showNotification("Lỗi kết nối. Vui lòng thử lại.", "error");
    }
}


// Thêm Hàm JavaScript Lưu Lịch Sử
async function saveHistory() {
        console.log("Hàm saveHistory() được gọi");  // Kiểm tra log

const thresholds = {
    ctr: parseFloat(document.getElementById('ctr-threshold').value) || 2,
    cr: parseFloat(document.getElementById('cr-threshold').value) || 2.5,
    cpp: parseFloat(document.getElementById('cpp-threshold').value) || 10,
    fee_ads: parseFloat(document.getElementById('fee-ads-threshold').value) || 20,
    roi: parseFloat(document.getElementById('roi-threshold').value) || 75
};

console.log("Ngưỡng tùy chỉnh được nhập:", thresholds);


        const analysisResults = {
            ctr: parseFloat(document.querySelector('#analysis-results p:nth-child(1)').textContent.split(": ")[1]) || 0,
            cr: parseFloat(document.querySelector('#analysis-results p:nth-child(2)').textContent.split(": ")[1]) || 0,
            cpp: parseFloat(document.querySelector('#analysis-results p:nth-child(3)').textContent.split(": ")[1].substring(1)) || 0,
            fee_ads: parseFloat(document.querySelector('#analysis-results p:nth-child(5)').textContent.split(": ")[1]) || 0,
            roi: parseFloat(document.querySelector('#analysis-results p:nth-child(4)').textContent.split(": ")[1]) || 0,
        };

        try {
            const response = await fetch(`${API_URL}/history/`, {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify(analysisResults)
            });

            if (response.ok) {
                alert("Kết quả đã được lưu!");
                fetchHistory();
            } else {
                throw new Error(`Lỗi khi lưu lịch sử: ${response.status}`);
            }
        } catch (error) {
            console.error("Lỗi khi lưu lịch sử:", error);
        }
    }

async function getRecommendation(data) {
    try {
        const response = await fetch('/recommend/', {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify(data)
        });

        const result = await response.json();
        console.log("Recommendation from API:", result.recommendation);
        document.getElementById("recommendation-section").innerText = result.recommendation;
    } catch (error) {
        console.error("Lỗi khi gửi yêu cầu:", error);
    }
}


async function renderHistoryChart() {
    const response = await fetch(`${API_URL}/history/`);
    const history = await response.json();

    // Hủy biểu đồ cũ nếu đã tồn tại
    const existingChart = Chart.getChart("historyChart");
    if (existingChart) {
        existingChart.destroy();
    }

    // Lấy dữ liệu từ API
    const labels = history.map(entry => new Date(entry.timestamp).toLocaleString());
    const ctrData = history.map(entry => entry.ctr);
    const crData = history.map(entry => entry.cr);
    const cppData = history.map(entry => entry.cpp);
    const roiData = history.map(entry => entry.roi);

    // Vẽ biểu đồ với nhiều dataset
    const ctx = document.getElementById('historyChart').getContext('2d');
    new Chart(ctx, {
        type: 'line',
        data: {
            labels: labels,
            datasets: [
                {
                    label: 'CTR (%)',
                    data: ctrData,
                    borderColor: 'rgba(75, 192, 192, 1)',
                    backgroundColor: 'rgba(75, 192, 192, 0.2)',
                    borderWidth: 1
                },
                {
                    label: 'CR (%)',
                    data: crData,
                    borderColor: 'rgba(255, 99, 132, 1)',
                    backgroundColor: 'rgba(255, 99, 132, 0.2)',
                    borderWidth: 1
                },
                {
                    label: 'CPP (USD)',
                    data: cppData,
                    borderColor: 'rgba(54, 162, 235, 1)',
                    backgroundColor: 'rgba(54, 162, 235, 0.2)',
                    borderWidth: 1
                },
                {
                    label: 'ROI (%)',
                    data: roiData,
                    borderColor: 'rgba(255, 206, 86, 1)',
                    backgroundColor: 'rgba(255, 206, 86, 0.2)',
                    borderWidth: 1
                }
            ]
        },
        options: {
            responsive: true,
            plugins: {
                legend: {
                    display: true,
                    position: 'top'
                }
            }
        }
    });
}


async function refreshAccessToken() {
    const refreshToken = localStorage.getItem("refreshToken");
    if (!refreshToken) return;

    try {
        const response = await fetch(`${API_URL}/refresh/`, {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ refresh_token: refreshToken })
        });

        if (response.ok) {
            const result = await response.json();
            localStorage.setItem("accessToken", result.access_token);
            showNotification("Token đã được làm mới!", "success");
        } else {
            showNotification("Lỗi khi làm mới token.", "error");
        }
    } catch (error) {
        console.error("Lỗi khi làm mới token:", error);
        showNotification("Lỗi kết nối. Vui lòng thử lại.", "error");
    }
}


async function analyzeData() {
    const data = {
        views: parseInt(document.getElementById('views').value) || 0,
        clicks: parseInt(document.getElementById('clicks').value) || 0,
        orders: parseInt(document.getElementById('orders').value) || 0,
        revenue: parseFloat(document.getElementById('revenue').value) || 0,
        spend: parseFloat(document.getElementById('spend').value) || 0,
        sales: parseFloat(document.getElementById('sales').value) || 0,
        marketing: parseFloat(document.getElementById('marketing').value) || 0,
        fees: parseFloat(document.getElementById('fees').value) || 0,
        thresholds: {
            ctr: parseFloat(document.getElementById('ctr-threshold').value) || 2,
            cr: parseFloat(document.getElementById('cr-threshold').value) || 2.5,
            cpp: parseFloat(document.getElementById('cpp-threshold').value) || 10,
            fee_ads: parseFloat(document.getElementById('fee-ads-threshold').value) || 20,
            roi: parseFloat(document.getElementById('roi-threshold').value) || 75
        }
    };

    console.log("Dữ liệu gửi đi:", data);

    try {
        const response = await fetch('https://etsyads-backend.onrender.com/analyze/', {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify(data)
        });

        if (!response.ok) {
            console.error(`Lỗi từ backend: ${response.statusText}`);
            alert(`Lỗi từ backend: ${response.statusText}`);
            return;
        }

        const result = await response.json();
        console.log("Kết quả từ backend:", result);
        showNotification("Phân tích dữ liệu thành công!");
       
       // Cập nhật biểu đồ so sánh
       updateChart(result.analysis, data.thresholds);

        // Hiển thị Kết Quả Phân Tích
        const analysisResults = result.analysis;
        if (analysisResults) {
            document.getElementById('analysis-results').innerHTML = `
                <p>CTR: ${analysisResults.ctr.toFixed(2)}%</p>
                <p>CR: ${analysisResults.cr.toFixed(2)}%</p>
                <p>CPP: $${analysisResults.cpp.toFixed(2)}</p>
                <p>ROI: ${analysisResults.roi.toFixed(2)}%</p>
                <p>Fee Ads: ${analysisResults.fee_ads.toFixed(2)}%</p>
            `;
        } else {
            document.getElementById('analysis-results').innerHTML = "<p>Không có dữ liệu phân tích.</p>";
        }

        // Hiển thị đề xuất hành động
       if (result.recommendation) {
    const proposalsHTML = result.recommendation
        .split('<br>')
        .map(proposal => `<p>${proposal.trim()}</p>`)
        .join('');
    document.querySelector('.proposals').innerHTML = proposalsHTML;
} else {
    document.querySelector('.proposals').innerHTML = "<p>Không có đề xuất nào.</p>";
}


        //  Cập nhật biểu đồ
        updateCharts({
            ctr: { current: analysisResults.ctr, average: data.thresholds.ctr },
            cr: { current: analysisResults.cr, average: data.thresholds.cr },
            cpp: { current: analysisResults.cpp, average: data.thresholds.cpp },
            fee_ads: { current: analysisResults.fee_ads, average: data.thresholds.fee_ads },
            roi: { current: analysisResults.roi, average: data.thresholds.roi }
        });

    } catch (error) {
        console.error("Lỗi khi kết nối tới backend:", error);

        if (error.message.includes("Failed to fetch")) {
            alert("Không thể kết nối tới backend. Vui lòng kiểm tra kết nối.");
        } else if (error.message) {
            alert(`Đã xảy ra lỗi: ${error.message}`);
        } else {
            console.error("Lỗi khác:", error);
        }
    }
}




async function saveAnalysis() {
    const data = {
        views: parseInt(document.getElementById('views').value) || 0,
        clicks: parseInt(document.getElementById('clicks').value) || 0,
        orders: parseInt(document.getElementById('orders').value) || 0,
        revenue: parseFloat(document.getElementById('revenue').value) || 0,
        spend: parseFloat(document.getElementById('spend').value) || 0,
        sales: parseFloat(document.getElementById('sales').value) || 0,
        marketing: parseFloat(document.getElementById('marketing').value) || 0,
        fees: parseFloat(document.getElementById('fees').value) || 0
    };

    try {
        const response = await fetch(`${API_URL}/analysis/`, {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify(data)
        });

        if (response.ok) {
            alert("Dữ liệu đã được lưu thành công!");
        } else {
            alert("Lỗi khi lưu dữ liệu.");
        }

    } catch (error) {
        console.error("Lỗi lưu dữ liệu:", error);
    }
}


// Hàm vẽ biểu đồ

function renderChart(canvasId, label, data, backgroundColor) {
    const canvas = document.getElementById(canvasId);
    if (!canvas) {
        console.error(`Không tìm thấy phần tử canvas với ID: ${canvasId}`);
        return;
    }

    const ctx = canvas.getContext('2d');

    // Phá hủy biểu đồ cũ nếu tồn tại
    if (charts[canvasId]) {
        charts[canvasId].destroy();
    }

    // Tạo biểu đồ mới và lưu vào charts
    charts[canvasId] = new Chart(ctx, {
        type: 'bar',
        data: {
            labels: ['Hiện tại', 'Ngưỡng Trung Bình'],
            datasets: [{
                label: label,
                data: data,
                backgroundColor: backgroundColor,
            }],
        },
        options: {
            responsive: true,
            plugins: {
                legend: { position: 'top' },
                title: { display: true, text: `So Sánh ${label}` },
            },
        },
    });
}

function updateChart(currentData, averageData) {
    const canvas = document.getElementById("comparison-chart");
    if (!canvas) {
        console.error("Không tìm thấy phần tử canvas.");
        return;
    }

    const ctx = canvas.getContext("2d");

    // Phá hủy biểu đồ cũ nếu tồn tại
    if (comparisonChart) {
        comparisonChart.destroy();
    }

    // Tạo biểu đồ mới với dữ liệu ngưỡng tùy chỉnh
    comparisonChart = new Chart(ctx, {
        type: "bar",
        data: {
            labels: ["CTR", "CR", "CPP", "ROI", "Fee Ads"],
            datasets: [
                {
                    label: "Hiện Tại",
                    data: [currentData.ctr, currentData.cr, currentData.cpp, currentData.roi, currentData.fee_ads],
                    backgroundColor: "rgba(75, 192, 192, 0.6)",
                    borderColor: "rgba(75, 192, 192, 1)",
                    borderWidth: 1
                },
                {
                    label: "Ngưỡng Trung Bình",
                    data: [averageData.ctr, averageData.cr, averageData.cpp, averageData.roi, averageData.fee_ads],
                    backgroundColor: "rgba(153, 102, 255, 0.6)",
                    borderColor: "rgba(153, 102, 255, 1)",
                    borderWidth: 1
                }
            ]
        },
        options: {
            responsive: true,
            plugins: {
                legend: { position: "top" },
                title: { display: true, text: "So Sánh Chỉ Số Bán hàng Hiện tại và Ngưỡng Trung Bình Của Bạn" }
            }
        }
    });
}


     // Cập nhật các biểu đồ tại đây
    function updateCharts(chartsData) {
    document.querySelector('.section-header').innerText = 'So Sánh Chỉ Số';
    // Kiểm tra dữ liệu truyền vào
    console.log("Dữ liệu biểu đồ:", chartsData);

    renderChart('chart-ctr', 'CTR (%)', [chartsData.ctr.current, chartsData.ctr.average], ['#4CAF50', '#FF5722']);
    renderChart('chart-cr', 'CR (%)', [chartsData.cr.current, chartsData.cr.average], ['#2196F3', '#FFC107']);
    renderChart('chart-cpp', 'CPP (USD)', [chartsData.cpp.current, chartsData.cpp.average], ['#9C27B0', '#3F51B5']);
    renderChart('chart-roi', 'ROI (%)', [chartsData.roi.current, chartsData.roi.average], ['#E91E63', '#03A9F4']);
    renderChart('chart-fee', 'Fee Ads (%)', [chartsData.fee_ads.current, chartsData.fee_ads.average], ['#03A9F4', '#FFC107']);


// Hàm gọi backend và hiển thị biểu đồ
// Cập nhật hiển thị kết quả phân tích



    }

</script>
<!-- Chèn JavaScript từ thư mục static -->
<script src="/static/script.js"></script>

<!-- Footer -->
    <footer style="text-align: center; margin-top: 20px;">
        <p>© 2025 LeLifeAI. All rights reserved.</p>
    </footer>
</body>
</html>
